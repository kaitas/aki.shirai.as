---
author: aki
title: "\n\t\t\t\tMastodonに見るサーバー技術の民主化(=個人運営化)について潜在的技術リスクと反省・加筆版\t\t"
slug: launching-mastodon-instance-thoughts-and-reflections
id: 40417
date: '2017-04-17 01:17:15'
layout: post
comments: false
categories:
  - twitter
  - Web
tags:
  - Mastodon
---

## Mastodonはじめました。

[https://mstdn.io/@o_ob/](https://mstdn.io/@o_ob/) 以下、サーバ立ち上げようと思ってhogehogeしてみた結果、反省の再掲です。雑言です。 ちなみにMastodonインスタンス立ち上げのHowToではありません！このエントリーもMastodonが流行り始めて3日ぐらいの2017/4/16の記事です。もう古びていると思います！

## Mastodonに至るまでのノスタルジー

<span class="s2">ある種の大学の先生というのはいわゆるフルスタック系エンジニアである必要があって、自分の研究室やらIT環境やらを常に実験材料にしてhogehogeするものです。</span>

<span class="s2">自分もサーバー関係はいろいろやってきていて、古いところではISDNテレホーダイを使った自宅サーバーとか，FirstClassを使ったSNSのはしりとか。フランス留学中はリモート録画サーバーとか、帰国後のこの10年強でも自宅/自作サーバー系はいろいろやってきていて、光ファイバー、固定IPからDDNSなどなど。</span>

<span class="s2">ハードウェア的には自宅</span>(自作、サーバー設計機)、<span class="s3">1U→</span>エアコン含めた電気代が機材を上回る<span class="s3">→VM→</span>レンサバ、<span class="s3">VPS</span>、<span class="s3">RasPi</span>ときていて、<span class="s3">OS</span>的には<span class="s3">Redhat→Debian→Ubuntu→CentOS</span>と経験しそれなりに実用レベルの運用経験＆セキュリティも維持してきたのだけど、メールサーバー運用するのをできるだけ避けてきたのと<span class="s3">Docker</span>で実運用してこなかったので、Mastodonインスタンスを立ち上げようとなると、なかなか勇気いる。

<span class="s4">他にも</span>AWS<span class="s4">や</span>Google Compute Engine<span class="s4">などリソース課金型サービス、</span>SSL<span class="s4">なども同様で有料となると、なかなか時間と作業時間が折り合わない。貧乏な学生時代は自作だけでサーバー立てるのはなかなかに利益あったのですが。</span>

サービス的には自作<span class="s3">CMS</span>、会員サービス、チャットやロビーなどはモリモリ書いてきたけど、最近はセキュリティ維持のために<span class="s3">OSS</span>でも<span class="s3">LAMP+Wordpress</span>のようにパッケージ管理が行き届いた信頼性の高いソリューションに頼って来た感じです。

単にインストールするだけなら何とかなったとしても、実際の運用、それにまつわるトラブルなども含めてリスク管理ではありますし、実際に運用してみるとなると、結局インストールが簡単で、ユーザが多くてセキュリティ対策が早くて、どんな寝ぼけていても実施できるような堅牢性が重要になります。

なのでLAMPも、試すだけならともかく実運用ならできるだけソースから入れないし、できればVPSもゼロから立ち上げるのではなくて、レンタルサーバーで終わらせたい。 （本当はそういう人こそDockerのほうが向いているのかもしれないけど、ISPレンサバ各社がそこまでDockerをサポートしていないのも現状）

例えば昨今では<span class="s3">PHP</span>で素のログイン画面やファイルアップロード書くのは怖い。学校では教えるかもしれないけど、そんなユルい<span class="s3">PHP</span>フォームはあっという間に<span class="s3">rootkit</span>を送りつけられたり、<span class="s3">SQL</span>インジェクションを食らったりします。フランスでは日常的にハッカーがSSH絨毯爆撃してくるので、よっぽどしっかりとセキュリティ対策していないとあっという間にルートをとられたりゾンビ化されてしまいます（経験談）。

## 「教科書に書いてあること」と「教えられること」の差分

話を日本学校の先生に戻すと，つまり「教科書に書いてある事」と「生々しくて教科書には書けない実運用」の差分は日増しに大きくなっていく、ということで。ことIT分野ではサーバ技術についてはその傾向は強いと思う。

先生としては出来るだけ新鮮で生々しい技術を教えて、技術者の価値が高いうちに色々な経験を失敗含めて体験させるべきだろう。

(誰もがやれるようになってから失敗すると責められるからな！)

まあつまり<span class="s3">Mastodon</span>の流量によるトラフィック圧迫、もしもの時のデータ消失の責め苦などが怖くて試せないなど言い訳まじりに、最新の<span class="s3">SNS</span>サービスのインストールが気軽に試せなくなっていく時点で潜在的技術に対するリスクを増大させているのだなあと感じます。

まあそのうちどこの<span class="s3">ISP</span>でもやりそうだけどね！あとキャリア各社ね。

ソフトバンクとか<span class="s3">au</span>とか好きそうだし。

## と思ってたら mstdn.jp がすごいことになってた

mstdn.jpを立ち上げておられたぬるかる氏，どうやら筑波大学のM2さんなのですが，なんだかすごいことに． ■暫定世界一ユーザの多いmstdn.jpの管理者さんの奮闘ぶりに、思わずMSのクラウド担当者も声をかけるレベル [https://togetter.com/li/1100609](https://togetter.com/li/1100609) ■支援先 [https://enty.jp/nullkal](https://enty.jp/nullkal) これは経費差し引いても不要から外れる感じがする（まあ贈与して課税にすればいいのかもしれないけど…）。 普段からDockerをどっかどっかインストールしている人にとってはそんなに難しいことじゃないでしょうね～，とはいえ1時間で2000アカウントぐらい増えていく状況を見ていたのでそれは笑いが止まらないというか、何か運命的なものを感じるのだけれど。 ぬるかる氏の将来はどこへ。いい勉強ですね。

## 日本人こわい，おもしろい．

さて日本人の熱狂ぶりは本当にすごいエネルギーですね。 偽の<span class="s3">Mastdon</span>サーバーなどもっと出てきてもおかしくないです。気を付けましょう。  

## <span class="s3">3</span>日ほど<span class="s3">Mastodon</span>と<span class="s3">Twitter</span>の並列社会に暮らしてみて感じたこと

<span class="s3">Mastodon</span>は<span class="s3">Twitter</span>の良いところを完全に喰っているけど、実は野蛮な<span class="s3">Twitter</span>は野蛮さゆえに消滅はしないと思う。というか最後には<span class="s3">Twitter</span>が<span class="s3">OStatus</span>準拠になって「一つの<span class="s3">Mastodon</span>インスタンス」となって終われば良い事だ。 あとは未成年と本人認証かな，勝手サーバーだから仕方ないのかもしれないけど、連邦タイムラインに変態が流れるのはつらい。やつらはCWとか自分から設定しないからな。 同様に年齢認証について。幼稚なユーザの実年齢になんて興味はないのだけど、Mastodonの特性と未成年Twitterの欲望はとてもよく一致すると思う。 "何かあったときに"責任とるのはサーバー管理者なのだろうか。まあ「何かあったとき」なんてことを考えてたらインスタンスなんて立てられないのだけど、なんか予想をはるかに超えるような事件が起きそうでドキドキします。

## つぶやきコンテンツ漂流問題

多くの技術系カリスマ<span class="s3">Twitter</span>諸氏が取り組んでいるのは、現状のメインつぶやきをどこにするか？という「つぶやきコンテンツ漂流問題」とでも呼ぶべきか、まあライフログをどこでまとめていこうかということです。そんなの気にしてない人はどうでもいいのだろうけど。

自分は<span class="s3">Amaroq</span>で<span class="s3">iPhone</span>つぶやきは解決したので、最初の出発点は<span class="s3">Twitter→Mastdon</span>なのか<span class="s3">Mastodon→Twitter</span>なのかといった問題が残ってる。

実際には<span class="s3">Mastodon</span>は<span class="s3">feed</span>を吐くようなので、すぐに解決しそう。

で自分は<span class="s3">Twitter</span>ライフログはすべて<span class="s3">Facebook</span>にコピーし、<span class="s3">Wordpress</span>にまとめられているのでこのストリームに乗るなら楽である。 しかし奇遇なことに、実は<span class="s3">Wordpress</span>がミニブログとの競合を起こしてしまっている。

なのでこれを書いている。

## Google方面もがんばれ，特にGoogle Sitesとか．

<span class="s3">Wordpress</span>も、本当に必要なサイト以外は、どんどん<span class="s3">Google Apps</span>あたりに引っ越していくべきかと思う。

そういう意味では<span class="s3">Google Wave</span>とかもう一度頑張って欲しい気もするよ、<span class="s3">Google Apps</span>と<span class="s3">Slackbot</span>的な融合をしてくれるなら歓迎だ。

実はこの週末はMastodonのインストールに取り組むどころか，とあるサイトの完全SSL化とGoogle Apps統合をやっていたのですが、Google Appsの一部であったGoogle Sitesは”いちおう”取得したドメインでWebサイトが構築できるサービスなのですが，見た目がダサすぎるばかりか、オブジェクトが個性的過ぎてCMSとしてはホント最低限のイントラネット程度の意味しか持たないサイトが作れる。このGoogle Sitesでもいいや！って用途もあるので、久々にGoogle Sitesを独自ドメインで運用しようとしていたら、実は「新しい Google Sites」なるサービスが立ち上がっていて，これはレスポンシブデザインもできるし、Google Drive各種ともきれいに統合できているしフォントは美しいしでいうことないのだけど，なんと「独自ドメインでは運用できない」という名言付き．なんだそれ！！フッターの「このサイトはGoogle Sitesでつくりました」もどうにかしてよと思うのだけど，なんというかこんなに素敵なサイトなのに自社ドメインでしか使えないとなると，じゃあそれでGoogle Appsの契約アカウント数が増えるのかというとそんなことはないと思うぞGoogleよ．Webというのは不特定多数の人々に無料で使えてこそ意味があるのではないでしょうか．

## まとめ： OStatus もっとがんばれ

Mastodonのようなオープンソースのマイクロブログサービスは実は標準化に取り組んでいる成果であって，[OStatus](https://ja.wikipedia.org/wiki/OStatus) というそうです．これはまさにLinux黎明期のころのような興奮なのですね．

実際に使う側の問題としは，この<span class="s3">100</span>文字ぐらいのチャットやマイクロブログから、ミニブログといった文字数と写真等のコンテンツの保管，メディアタギングをどう活用していくか。例えば「<span class="s3">LINE</span>ブログ」とかも，こうなってくるとあまり立つ瀬がないのかもしれない。レスポンシブなBlogとフォント以外に利点がないもの（というかこういうのはアメブロがやればいい）．

Mastodonはこの形のまま安定することはないと思います。インスタンスごとにカスタマイズして、厳格なユーザしかいないインスタンスも作れるだろうし、企業内インフラとしての利用もあるだろうし、個人用ローカルと連邦参照のみに絞ったスマホインスタンスによる<span class="s3">OStatusなんかも</span>できるかもしれないので、今後企業<span class="s3">IT</span>諸氏は大いにOStatus活用を検討すべきと思います。